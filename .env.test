# Deribit Webhook Python - Test Environment Configuration
# Used for testing and CI/CD pipelines

# Server Configuration
PORT=3001
HOST=127.0.0.1
LOG_LEVEL=DEBUG

# Environment Settings
NODE_ENV=test
USE_MOCK_MODE=false
USE_TEST_ENVIRONMENT=true
AUTO_START_POLLING=true

# API Configuration
API_KEY_FILE=../config/apikeys.yml

# Deribit API URLs (Test)
DERIBIT_API_URL=https://test.deribit.com/api/v2
DERIBIT_TEST_API_URL=https://test.deribit.com/api/v2
DERIBIT_WS_URL=wss://test.deribit.com/ws/api/v2
DERIBIT_TEST_WS_URL=wss://test.deribit.com/ws/api/v2

# Database Configuration (In-memory for tests)
DATABASE_URL=sqlite+aiosqlite:///:memory:

# Security Settings (Test values)
SECRET_KEY=test-secret-key-not-for-production
WEBHOOK_SECRET=test-webhook-secret
API_KEY_HEADER=X-API-Key
API_KEY_VALUE=test-api-key

# Rate Limiting (Disabled for tests)
RATE_LIMIT_ENABLED=false
RATE_LIMIT_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# Webhook Security (Disabled for tests)
WEBHOOK_SECURITY_ENABLED=false
WEBHOOK_TIMESTAMP_TOLERANCE=3600

# Polling Configuration (Disabled for tests)
ENABLE_POSITION_POLLING=false
POLLING_INTERVAL_SECONDS=5
# Position polling interval in minutes (used for position monitoring and adjustment)
POSITION_POLLING_INTERVAL_MINUTES=1
# Order polling interval in minutes (used for pending order processing)
ORDER_POLLING_INTERVAL_MINUTES=1
MAX_POLLING_ERRORS=3
AUTO_START_POLLING=false

# Background Tasks (Disabled for tests)
ENABLE_DATABASE_CLEANUP=false
DATABASE_CLEANUP_DAYS=1
ENABLE_HEALTH_CHECKS=false
HEALTH_CHECK_INTERVAL=60

# Logging Configuration
LOG_FORMAT=text
LOG_FILE=./tests/logs/test.log
LOG_MAX_SIZE=1MB
LOG_BACKUP_COUNT=1

# Trading Configuration (Test values)
SPREAD_RATIO_THRESHOLD=0.20
# 盘口价差步进倍数阈值：(盘口价差 / 价格最小步进) <= 此倍数时认为价差合理
SPREAD_TICK_MULTIPLE_THRESHOLD=3

# WeChat Bot Configuration (Test values)
WECHAT_TIMEOUT=5000
WECHAT_RETRY_COUNT=1
WECHAT_RETRY_DELAY=100

# Performance Settings (Minimal for tests)
WORKER_PROCESSES=1
MAX_CONNECTIONS=100
KEEPALIVE_TIMEOUT=1

# Monitoring (Disabled for tests)
ENABLE_METRICS=false
METRICS_PORT=9091
